<!doctype html> <html lang="en">
<!-- This is a generated file. Do not edit. -->
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

        <title>Duke lecture 2023</title>

        <meta name="description" content="Slides for Vienna 2018 presentation">
        <meta name="author" content="Helena Mitasova">

        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

        <link rel="stylesheet" href="css/reveal.css">
        <link rel="stylesheet" href="css/theme/ncsu-geoforall-lab.css" id="theme">
        <link rel="stylesheet" href="css/nouislider.css" id="slide">

        <!-- For syntax highlighting -->
        <link rel="stylesheet" href="lib/css/zenburn.css">
        <!-- For chalkboard plugin -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">

        <!-- If the query includes 'print-pdf', include the PDF print sheet -->
        <!-- Printing and PDF exports -->
        <script>
            var link = document.createElement( 'link' );
            link.rel = 'stylesheet';
            link.type = 'text/css';
            link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
            document.getElementsByTagName( 'head' )[0].appendChild( link );
        </script>

        <!--[if lt IE 9]>
        <script src="lib/js/html5shiv.js"></script>
        <![endif]-->
    </head>

    <body>

        <div class="reveal">

            <!-- Any section element inside of this container is displayed as a slide -->
            <div class="slides">
<section>
<!--<h4 style="color: #707070">AAS 2018</h4>-->
<h2 style="margin-top: 0.0em;color: #000"> Dynamic Surfaces and Geospatial Processes </h2>
<p>
<h4 style="color: #707070">Helena Mitasova and Geoforall Lab team:</h4>
<p><small>A.Petrasova, V. Petras, B.Harmon, P.Tabrizian, J. Jeziorska</small>
<p><img src="img/cgaBlack.png" height="40"> <img src="img/4x1white.jpg" height="25">
</section>

<section>
<h2>From observations to tangible interaction </h2>
<ul>
<li class="fragment">multitemporal elevation observations
<li class="fragment">modeling surface processes 
<li class="fragment">beyond bare ground
<li class="fragment">Tangible Landscape
</ul>
</section>

<section>
<h2>Modeling and analysis of surfaces from multitemporal observations</h2>
<p>Application to Jockey's Ridge State Park</p>
</section>

<section>
<h3>Jockey's Ridge sand dunes</h3>
<ul>
<li> Largest active dunes on the East coast, state park with static boundaries
<li> Management challenges: wind blowrsn sand outside the park, covering structures and roads, dune lost elevation
<li> Quantification of changes and migration rates was needed
</ul>
<br>
<img height="350" src="img/surfaces/NHstudyarea_geoinf09c.jpg">
<img height="350" src="img/surfaces/JR_parkboundary.jpg">
<br><small><a href="https://www.ingentaconnect.com/content/cog/tme/2013/00000009/f0020003/art00004">Mitas, O. et al. 2014, Managing Dune Landscape Changes at Jockey's Ridge State Park, North Carolina, Tourism in Marine Environments 9(3-4), pp. 155-167.</a></small>
</section>

<section>
<h3>From digitized contours to lidar point clouds</h3>
Lidar technology transformed topography mapping in 21st century
<p><img height="400" src="img/surfaces/digitized_cont2d_jr1999zoom.png">
<img height="400" src="img/surfaces/pointcloud2d_jr2009zoom.png">
</section>

<section>
<h3>Coastal multitemporal elevation data</h3>
<ul>
  <li>photogrammetry: 1974, 1995, 1998
  <li>lidar: 1999,2001,2007,2008,2009,2012,2014,2015 (7/2018,10/2018)
  <li>structure from motion from UAS imagery: 2016,2017
</ul>
<br>
<img height="145" src="img/surfaces/points_1974.png"> &nbsp; &nbsp;
<img height="145" src="img/surfaces/points_1998.png"> &nbsp; &nbsp;
<img height="145" src="img/surfaces/points_1999.png">
<br>1974 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
    1998 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1999
<br>
<img height="145" src="img/surfaces/points_2001.png">&nbsp; &nbsp;
<img height="145" src="img/surfaces/points_2009.png"> &nbsp; &nbsp;
<img height="145" src="img/surfaces/points_2015.png">
<br>2001 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
    2009 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2015
<br><small> <a href="https://www.mdpi.com/1424-8220/23/3/1593"> 
Petras et al., 2023, Point density variations in airborne lidar point clouds, Sensors 23(3), 1593.</a> </small></p>
</section>

<section>
<h3>Point cloud to DEM: binning</h3>
Jockey's Ridge dunes 1999 point cloud, binned at 1m resolution
<p><img height="440" src="img/surfaces/lidstorast1m.jpg">
</section>

<section>
<h3>Point cloud to DEM: binning</h3>
Jockey's Ridge dunes 1999 point cloud, binned at 3m resolution
<p><img height="440" src="img/surfaces/lidstorast.jpg">
</section>

<section>
<h3>Point cloud to DEM: interpolation</h3>
1999 point cloud interpolated at 1m resolution using reg. spline with tension 
<p><img height="450" src="img/surfaces/liddfdm1e.jpg">
</section>

<section>
<h3>Spline interpolation with analysis</h3>
By tuning the tension coupled with smoothing, noise is reduced and, simultaneously, 
topographic parameters are derived at a desired level of detail:
<br>profile curvature and slope draped over surface with changing tension
<br><img class="stretch" src="img/surfaces/lidar_tension_curv.gif">
<br><small> <a href="https://ieeexplore.ieee.org/abstract/document/1522204">
Mitasova, H. et al. 2005, Simultaneous spline interpolation and topographic analysis for lidar elevation data: methods for Open source GIS, IEEE GRSL 2(4), pp. 375- 379.</a>
</small>
</section>

<section>
<h3>Multitemporal DEM </h3>
Managed using GRASS temporal framework 
<a href="https://grass.osgeo.org/grass82/manuals/temporalintro.html">TGRASS</a>
<p>
  <img height="100" src="img/surfaces/timeline.png">
  <img height="150" src="img/surfaces/jr_timeline3D.jpg">
<br>
   <img height="130" src="img/surfaces/temp_plot_leeward_pt.png">
   <img height="130" src="img/surfaces/temp_plot_windward_pt.png">
<br>
   <img height="100" src="img/surfaces/series2.jpg">
<br><small>Gebbert, S., Pebesma, E., 2014. A temporal GIS for field based 
environmental modeling. Environmental Modelling and Software 53, 1-12.</small>
</section>

<section>
    <h3>Multitemporal DEM visualization</h3>
<p>Jockey's Ridge 1974 - 2017: southward migration, landform transformation
from crescentic dune to sand starved, fast moving parabolic dune
    <img class="stretch" src="img/surfaces/jr_74_17_anim3dlgfix.gif">
</section>

<section data-animate="1,13" data-path="img/surfaces/JR_anim/JR_anim">
<h3>Multitemporal DEM visualization</h3>
</section>

<section>
<h3>Complex pattern of changes</h3>
<ul>
<li>DEM differences show both elevation loss (red) and increase (blue)
<li>total sand volume has been stable (~3.5 mil cubic m)
<li>volume of core (sand not moved between 1974-2017) is only 30% of total volume
</ul>
<img height="280" src="img/surfaces/jrdiff74_95.jpg">
<img height="280" src="img/surfaces/jrdiff08_15.jpg">
<p class="fragment"><img height="120" src="img/surfaces/jr_cut74_17.jpg"></p>
<!--  <img height="130" src="img/surfaces/temp_plot_windward_pt.png">
   <img height="130" src="img/surfaces/temp_plot_leeward_pt.png">
<img height="200" src="img/surfaces/jr7417_maxrastcorr.jpg">-->
</section>

<section>
    <h3>Multitemporal Contours</h3>
Contours capture the landform change but they are hard to read
<br>   <img height="260" src="img/surfaces/jr_74_2017_16mcontour.png"> 16m
<br>   <img height="230" src="img/surfaces/jr_74_2017_20mcontour.jpg"> 20m
<!--   <img height="130" src="img/surfaces/jr16/legend.png"> -->
</section>

<section >
    <h3>Space-Time cube visualization</h3>
<p>DEM time series is converted into space-time voxel model in TGRASS and evolution of a contour 
is represented as isosurface: 16m and 20m </p>
  <img height="400" src="img/surfaces/jr16/animation.gif"> 
<!--<img src="img/jr18/animation.gif"> -->
<img height="400" src="img/surfaces/jr20/animation.gif"> 
</section>

<section>
<h3>Jockey's Ridge evolution analysis</h3>
<p>DEM time series: evolution quantified using TGRASS and surface analysis tools 
<ul>
  <li>linear trend in loss of peak elevation at 0.3m per year 
  <li>accelerating horizontal migration from 3m/yr to 6m/yr
  <li>total sand volume is stable, but the <strong>core</strong> (sand that has not moved) is shrinking
  <li>vegetation increased, but dune still kills trees on the leeward side
  <li>management challenges: dynamic feature confined to static park boundaries
</ul>
<p>
<!--<img height="150" src="img/surfaces/core_2017_cut6.jpg">-->
<img height="200" src="img/surfaces/jr_74_17_cut3.jpg">
<img height="200" src="img/surfaces/peakregression_1950_2017.png">
</section>

<section>
<h3>Jockey's Ridge story</h3>
<p>The 43 m high dune was a transient landform 
<p><img height="200" src="img/surfaces/JR_photosevol_17_50_08.jpg">
<br>
<img height="200" src="img/surfaces/Kittytrees1900.jpg">
<img height="200" src="img/surfaces/JR_2017_burriedtrees.jpg">
<img height="200" src="img/surfaces/veglost98_07.jpg">
<p><small>Dune in 1900 and 2016, vegetation lost between 1998-2007</small>
</section>

<!--
<section>
<h3>Vegetation</h3>
<ul>
<li>burried vegetation extent was estimated using DEM and DSM (more details?)
<li>Vegetation has spread, but dune still kills trees on the leeward side
</ul>
<p>
<img height="400" src="img/surfaces/jr_vegetation45_09.jpg">
</section>
-->

<section>
<h3>Jockey's Ridge management</h3>
Management focus is on preserving processes rather than features: 
<p><strong>living landscape</strong>
<p>Up to date, 3D mapping is essential for sand relocation planning (done in 2003, 2019), 
sand volume estimates, assessment of effectivenes, and for vegetation management.
<p>
<img height="220" src="img/surfaces/buldoz1_s.jpg">
<img height="220" src="img/surfaces/JR2005-1.jpg">
<p><a href="https://doi.org/10.3727/154427313X13818453739477">Mitas, O. et al., 2013, Managing Dune Landscape Changes at Jockey's Ridge State Park, North Carolina, Tourism in Marine Environments 9(3-4), pp. 155-167.</a>
dd
</section>

<section>
<h3>Multitemporal DEMs</h3>
Learn more about multitemporal DEM analytics:
<ul>
<li><a href="https://www.springer.com/us/book/9781493918348">
Hardin et al. 2014, GIS-based Analysis of Coastal Lidar Time-Series, Springer Brief</a>
<li><a href="https://doi.org/10.1130/GES00699.1">Starek MJ, et al., 2011, Modeling and analysis of landscape evolution using airborne, terrestrial, and laboratory laser scanning, Geosphere, 7(6), p. 1340-1356</a>
<li><a href="https://doi.org/10.1109/LGRS.2013.2241730">Starek, M.J., et al. 2013, Space-Time Cube Representation of Stream Bank Evolution Mapped by Terrestrial Laser Scanning, IEEE Geoscience and Remote Sensing Letters 10(6), p. 1369-1373</a>
</ul>
<p><img height="200" src="img/surfaces/inundationArea.jpg">
<img height="200" src="img/surfaces/anim_storsurge.gif">
<img height="200" src="img/surfaces/umstead_stc.jpg">
</section>

<section>
<h2>From observations to modeling of processes</h2>
</section>

<section>
<h3>Water and sediment flow</h3>
<p>Land surface controls water and sediment flow across landscapes
<p>Critical processes and impacts: surface runoff, flooding, soil erosion
<p><img height="280" src="img/surfaces/secrefstorm2006Alberto.jpg">
<img height="280" src="img/surfaces/secref8-8-03ditch.jpg">
</section>

<section>
<h3>Surface flow modeling methods</h3>
Methods for modeling water flow depth 
<p>
<div class="left" style="max-width: 45% !important">
<ul>
<li class="fragment">input: DEM with depression</li>
<li class="fragment">least cost path</li>
<li class="fragment">D-inf with depression as sink</li>
<li class="fragment">water accumulates is depression: kinematic wave</li>
<li class="fragment">water fills depression and flows out: diffusive wave</li>
<li class="fragment">predefined channel through depression</li>
</ul>
</div>

<img class="right" style="max-width: 50% !important" height="450" src="img/surfaces/gisemflow1hh.gif">
</section>

<section>
   <h3>Dynamic Hydrologic Models</h3>
Flow modeling with diffusion term: process-based simulation 
<p><img height="360" src="img/surfaces/gisemhhdifu.gif">
<p><small>Instead of filling the DEM, we fill the depression with water</small>
</section>

<section>
   <h3>Path sampling method</h3>
<ul>
  <li>duality between particle and field representation
  <li>path sampling: water evolving according to the shallow
      water bivariate continuity equation - drift and diffusion with stochastic component
</ul>
<p class="fragment"> <img height="380" src="img/surfaces/fanimwalk.gif">
<img class="fragment" height="380" src="img/surfaces/fanimhhcolp.gif">
</section>

<section>
   <h3>Overland water flow </h3>
<p>Path sampling based simulation of water flow within a small agricultural watershed
<p> <img height="340" src="img/surfaces/lw_storm2006Alberto.jpg">
<img height="390" src="img/surfaces/elev_dischtest.gif">
<p><small>Photo: Flooding during Hurricane Alberto in 2006; Model: simulation of ponding and dispersed flow over the road</small>
</section>

<section>
<h3>High resolution water flow</h3>
 <p> Street level modeling of surface runoff: sub-meter resolution, lidar-based DEM
and path sampling method reproduce flow over streets and ponding in riparian area
protected by stream buffers 
<p>
    <img height="450" src="img/surfaces/carywater_ortho_lg.jpg">
    <img height="450" src="img/surfaces/water_stormdrains_zoom.jpg">
</section>

<section>
<h3>High resolution water flow</h3>
 <p> Modeling spatial pattern of standing water after storm has passed
<p>
    <img height="380" src="img/surfaces/carysimwe_eeidstorm.jpg">
    <img height="380" src="img/surfaces/carysimwe_eeidpoststorm.jpg">
</section>

<section>
<h3>Modeling surface runoff and erosion/deposition</h3>
<p>Impact of variable land cover and construction on runoff and erosion and deposition, limitations of stream buffer protection
<p> <img width="90%" src="img/surfaces/middleschool_scen.jpg">
</section>

<section>
<h3>Water flow and erosion modeling</h3>
Learn more about surface water flow and erosion, sediment transport and deposition modeling:
<ul>
<li><a href="https://doi.org/10.5194/gmd-12-2837-2019">Harmon B. et al., 2019. r.sim.terrain 1.0: a landscape evolution model with dynamic hydrology. In: Geoscientific Model Development, 12(7).
<li><a href="https://www-sciencedirect-com.prox.lib.ncsu.edu/science/article/pii/B978012374739600052X">Mitasova et al., 2013, GIS-based soil erosion modeling, In: Treatise on Geomorphology. Academic Press, San Diego, CA, vol. 3, Remote Sensing and GIScience in Geomorphology, pp. 228â€“258</a>
<li><a href="http://fatra.cnr.ncsu.edu/~hmitaso/gmslab/papers/II.6.8_Mitasova_044.pdf">
Mitasova, H., et al., 2005, Path sampling method for modeling overland water flow, sediment transport and short term terrain evolution in Open Source GIS. In: C.T. Miller,  et al. eds., Proc. CMWR XV, 13-17 June 2004, Chapel Hill, NC, USA, Elsevier, pp. 1479-1490.</a>
</ul>
    <img height="150" src="img/surfaces/yakima_panorama_1s.jpg">
</section>

<section>
<h2>Beyond bare ground</h2>
<p>
Modeling and analyzing surfaces with vegetation and structures
</section>

<section>
<h3>Beyond bare earth surface: vegetation</h3>
Geomorphons (Jasiewicz, Stepinski 2013) for vegetation surfaces from lidar, UAS
<br>individual tree detection and trunk modeling (Tabrizian et al. 2018)
<br>
<img height="250" src="img/surfaces/geomorphon.png">
<img height="250" src="img/surfaces/trunk_replace.jpg">
<p><small><a href="https://doi.org/10.3390/ijgi9070445">Tabrizian, P. et al., 2020, High Resolution Viewscape Modeling Evaluated Through Immersive Virtual Environments. ISPRS Int. J. Geo-Inf. 9, 445. </a>
</small>
</section>

<section>
<h3>Viewshed from DSM</h3>
Deriving viewshed from DSM with enhanced tree representation using
<br>individual tree detection and trunk modeling (Tabrizian et al. 2018)
<br>
<img height="250" src="img/surfaces/thick_view.jpg">
<img height="250" src="img/surfaces/thin_view.jpg">
<br>
<img height="150" src="img/surfaces/view_photos.png">
</section>


<section>
<h3>Urban topography and solar irradiation</h3>
Modeling the dynamics of solar irradiation and cast shadows in urban environment:
summer solstice day at NCSU Centennial Campus
<p>
<img height="400" src="img/surfaces/summer_solstice_centennial.gif">
</section>

<section>
<h3>Vegetation voxel model</h3>
Generalized Fragmentation Index:
slice of raw point cloud and slice of fragmentation index 3D raster
<p>
<img height="250" src="img/surfaces/profiles_points_and_ff.png">
<img height="200" src="img/surfaces/profile3d.png">
</section>

<section>
<h3>Vegetation voxel model</h3>
Slicing through fragmentation index 3D raster
<p>
<img height="400" src="img/surfaces/voxels_vegetation_anim.gif">
<small><a href="https://doi.org/10.1186/s40965-017-0021-8">
Petras, V. et al. 2017. Generalized 3D fragmentation index derived from lidar point clouds. 
Open Geospatial Data, Software and Standards 2(9).</a> </small>
</section>

<section>
<h2>Tangible interface for surface analysis and process modeling</h2>
</section>

<section>
<h3>Tangible Landscape</h3>
<p> Bringing people together around GIS: Tangible user interface for GRASS GIS
<p>Designed to make working with geospatial data and simulations engaging, and fun</p>
<p>
    <img height="180" src="img/surfaces/tangible_landscape_compcrop.jpg">
<p>
Petrasova, A. et al. (2018). Tangible Modeling with Open Source GIS. Second edition. Springer International Publishing.
<a href="https://doi.org/10.1007/978-3-319-89303-7">https://doi.org/10.1007/978-3-319-89303-7</a>
</section>

<section>
<h3>How does it work?</h3>
<iframe data-autoplay width="50%" height="330" src="https://www.youtube.com/embed/Cd3cCQTGer4?rel=0&amp;showinfo=0&amp;loop=1&amp;playlist=Cd3cCQTGer4" frameborder="0" allowfullscreen></iframe>
&nbsp; &nbsp;<img height=380 src="img/surfaces/rendered_diagram_2.png">
<p>Tangible Landscape couples a digital and a physical model through a continuous cycle of 3D scanning, geospatial modeling, and projection</p>
</section>

<section>
<h3>Interactions</h3>
<p><img height="450" src="img/surfaces/tl_interactions_all.jpg">
</section>

<section>
    <h3>Coupling with 3D rendering</h3>
<p><img height="450" src="img/surfaces/process4.png">
</section>

<section>
    <h3>Design scenario analysis</h3>
<p><img height="480" src="img/surfaces/process7.png">
</section>

<!--
<section>
    <h3>Tangible Landscape + Immersive Virtual Reality</h3>
<img height="180" src="img/surfaces/coupling_case3.jpg">
  <iframe data-autoplay width="853" height="480"  src="https://www.youtube.com/embed/pYbpEMjME1Y?rel=0&amp;showinfo=0" frameborder="0" allo
wfullscreen></iframe>
<iframe width="560" height="315" src="https://www.youtube.com/embed/akCTeknStmQ?rel=0&amp;start=32" frameborder="0" allow="autoplay; encrypted-me
dia" allowfullscreen></iframe>
</section>
-->

<section>
<h3>Tangible Landscape for designers and researchers</h3>
<p>
<img height="300px" src="img/surfaces/tl_planting_3.jpg">
<img height="300px" src="img/surfaces/TL_scientists.jpg">
</section>

<section>
<h3>Tangible Landscape for education</h3>
<p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/jX6FurEeW28?rel=0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
<img height="260" src="img/surfaces/collaboration2.JPG">
</section>

<section>
<h3>Tangible Landscape for communities</h3>
Platform for decision-making and science communication
    where people of different backgrounds can interact.
<p>
<img height="220px" src="img/surfaces/bhigames_composite.jpg">
<br><a href="https://ncsu-geoforall-lab.github.io/geospatial-simulations-course/topics/tangible_landscape.html">
Learn more about Tangible Landscape</a>
<br>Tangible Landscape website: 
<a href="tangible-landscape.github.io">tangible-landscape.github.io</a>
<br>TL wiki: github.com/tangible-landscape/grass-tangible-landscape/wiki
</section>

<section>
<h3>Open Science</h3>
<p>Developing open source software and contributing to OSGeo projects:
<br>GRASS GIS <a href="https://grass.osgeo.org/">https://grass.osgeo.org/</a>
<br>Tangible Landscape  <a href="https://tangible-landscape.github.io">tangible-landscape.github.io</a>
<p>Open access educational material:
<br>NCSU GeoForAll Lab Courses and Workshops
<a href="https://geospatial.ncsu.edu/geoforall/courses.html">https://geospatial.ncsu.edu/geoforall/courses.html</a>
<p><a href="https://go.ncsu.edu/geoviz-scan">Geovisualization lab virtual tour: https://go.ncsu.edu/geoviz-scan</a>
<br><img height="280" src="img/surfaces/geovizlab_people2018.jpg">
</section>

<section>
<h3>Thank You!</h3>
<p>
<iframe data-autoplay width="700" height="350" src="https://www.youtube.com/embed/Uje8ORyhBaQ?rel=0&amp;showinfo=0&amp;loop=1&amp;playlist=Uje8ORyhBaQ" frameborder="0" allowfullscreen></iframe>
</section>

<!-- This is a generated file. Do not edit. -->
        </div>  <!-- slides -->

    </div>  <!-- reveal -->
    <!--
        Home button or link to a parent page
        If you want this to be unique for every page (slide deck),
        then remove it from here and put it at the end of each
        file (or series of files) creating one page
        (the position will be little different)
        TODO: some JS is needed to move it to the right position
    -->
    <div class="parent-page">
        <!-- alternative symbol: &#x1f3e0; -->
        <a href="https://github.com/petrasovaa/amos-STC-presentation" title="Go to the repository">
        <img width="15px" src="img/home.svg"></a>
    </div>

        <script src="lib/js/head.min.js"></script>
        <script src="js/reveal.js"></script>

        <script>

            // Full list of configuration options available here:
            // https://github.com/hakimel/reveal.js#configuration
            Reveal.initialize({
                // Display controls in the bottom right corner
                controls: false,

                // Display a presentation progress bar
                progress: true,
                
                center: true,
                showNotes: false,
                // Display the page number of the current slide
                slideNumber: false,

                // Enable the slide overview mode
                overview: true,

                // Turns fragments on and off globally
                fragments: true,

                // The "normal" size of the presentation, aspect ratio will be preserved
                // when the presentation is scaled to fit different resolutions. Can be
                // specified using percentage units.
                // width: 960,
                // height: 700,
                
                // Factor of the display size that should remain empty around the content
                margin: 0.05,  // increase?

                // Bounds for smallest/largest possible scale to apply to content
                minScale: 0.5,
                maxScale: 5.0,

                theme: Reveal.getQueryHash().theme,  // available themes are in /css/theme
                transition: Reveal.getQueryHash().transition || 'none', // default/cube/page/concave/zoom/linear/fade/none

                // Push each slide change to the browser history
                history: true,
                // Enable keyboard shortcuts for navigation
                keyboard: true,

                // Vertical centering of slides
                center: true,

                // Enables touch navigation on devices with touch input
                touch: true,

                // Loop the presentation
                loop: false,
                // Flags if the presentation is running in an embedded mode,
                // i.e. contained within a limited portion of the screen
                embedded: false,

                // Number of milliseconds between automatically proceeding to the
                // next slide, disabled when set to 0, this value can be overwritten
                // by using a data-autoslide attribute on your slides
                autoSlide: 0,

                // Stop auto-sliding after user input
                autoSlideStoppable: true,

                // Enable slide navigation via mouse wheel
                mouseWheel: false,

                // Hides the address bar on mobile devices
                hideAddressBar: true,

                // Opens links in an iframe preview overlay
                previewLinks: false,

                // Transition speed
                transitionSpeed: 'default', // default/fast/slow

                // Transition style for full page slide backgrounds
                backgroundTransition: 'none', // default/none/slide/concave/convex/zoom

                // Number of slides away from the current that are visible
                viewDistance: 3,

                // Parallax background image
                //parallaxBackgroundImage: '', // e.g. "'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg'"

                // Parallax background size
                //parallaxBackgroundSize: '' // CSS syntax, e.g. "2100px 900px"
                // Optional libraries used to extend on reveal.js
                dependencies: [
                    { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
                    { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
                    { src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
                    { src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } },
                    { src: 'plugin/math/math.js', async: true }
                ]
            });

        </script>
<script src="js/nouislider.min.js"></script>
<script src="js/jquery-2.2.4.min.js"></script>
<script>
Reveal.addEventListener( 'ready', function( event ) {
	var nSlides = Reveal.getTotalSlides();

    for (i = 0; i < nSlides; i++) {
        createSlidersWebcam(Reveal.getSlide(i))
        createSlidersAnim(Reveal.getSlide(i))
    }
    
} );

function createSlidersWebcam(slide) {
    if (!$(slide).attr('data-camera')) {
        return;
    }
    var cam_number = $(slide).data('camera').split("_")[0]
    var slidenum = $(slide).data('slidenum')
    var slidenums = slidenum.split(",")
    slhtml = `<div  style="float:left; max-width:80%">
    <img id="animimage" width="100%" style="margin:auto"></div>
    <div style="float:right; max-width:20%">
    <img src="img/legend.png" width="200px">`
    if (slidenums[0] != -1) {
        slhtml += `<div style="font-size:70%">Isosurface <span style="font-size:50%">(people per 100 m<sup><span style="font-size:70%">2</span></sup>h)</span></div>
                   <div class="slider" id="slider1" style="background: #d2d2d2;width: 200px;margin: auto;margin-bottom: 15px"></div>`
    }
    if (slidenums[1] != -1) {
        slhtml += `<div style="font-size:70%">Rotate</div>
                   <div class="slider" id="slider2" style="background: #d2d2d2;width: 200px;margin: auto;margin-bottom: 15px"></div>`
    }
    slhtml += '</div>'
    slide.innerHTML += slhtml
    if (slidenums[0] != -1) {
        var slider1 = slide.querySelector('#slider1');
        noUiSlider.create(slider1, {
        	start: [12],
            step: 1,
        	connect: true,
        	range: {
        		'min': 0,
        		'max': 19
        	}
        });
        slider1.noUiSlider.on('slide', setImage);
        slider1.noUiSlider.set(slidenums[0])
    }
    if (slidenums[1] != -1) {
        var slider2 = slide.querySelector('#slider2');
        noUiSlider.create(slider2, {
            start: [0],
            step: 1,
            connect: true,
            range: {
                'min': 0,
                'max': 19
            }
        });
        slider2.noUiSlider.on('slide', setImage);
        slider2.noUiSlider.set(slidenums[1])
    }
    var animimage = slide.querySelector('#animimage')


    setImage()
    
    function setImage(){
        var value1 = 0
        var value2 = 0
        if (slidenums[0] != -1) {
            value1 = parseInt(slider1.noUiSlider.get());
        }
        if (slidenums[1] != -1) {
            value2 = parseInt(slider2.noUiSlider.get());
        }
        //var path = "/media/anna/Data/Projects/webcams/renderings/"
        var path = "http://fatra.cnr.ncsu.edu/cJw9c0/nJ0qKyeeuAXuWFouqfJx0GRMVU7OZhcPfNzy9/amos/rendering/"
        var camera = $(slide).data('camera')
        $("#animimage", slide).attr("src", path + "map_points_points_" + camera + "." + pad(value1, 4) + "." + pad(value2, 4) +".jpg");
    }
    function pad(n, width) {
        z = '0';
        n = n + '';
        return n.length >= width ? n : new Array(width - n.length + 1).join(z) + n;
    }
}

function createSlidersAnim(slide) {

    if (!$(slide).attr('data-animate')) {
        return;
    }
    var slidenum = $(slide).data('animate')
    var slidenums = slidenum.split(",")
    slhtml = `<div class="slider" id="slider" style="background: #d2d2d2;width: 400px;margin: auto;margin-bottom: 15px"></div>`
    slhtml += `<img id="animimage" width="100%" style="margin:auto">`

    slide.innerHTML += slhtml
        var slider = slide.querySelector('#slider');
        noUiSlider.create(slider, {
            start: [0],
            step: 1,
            connect: true,
            range: {
                'min': parseInt(slidenums[0]),
                'max': parseInt(slidenums[1])
            }
        });
        slider.noUiSlider.on('slide', setImage);
        slider.noUiSlider.set(0)
    var animimage = slide.querySelector('#animimage')

    setImage()

    function setImage(){
        var value = 0
        value = parseInt(slider.noUiSlider.get());

        var path = $(slide).data('path')
        $("#animimage", slide).attr("src", path + "_" + value + ".png");
    }
}
</script>
    </body>
</html>
